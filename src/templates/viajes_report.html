<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <title>{{ nombre }} - Detalle de Viajes ({{ periodo }})</title>
    <link rel="stylesheet" href="{{ css_file | default('report.css') }}" />
</head>

<body>
    <header class="header">
        <div class="info">
            <h1 class="titulo">{{ nombre }}</h1>
            <div class="periodo">PerÃ­odo: {{ periodo }}</div>
        </div>
        {% if logo_url %}
        <div class="logo">
            <img src="{{ logo_url }}" alt="Logo" />
        </div>
        {% endif %}
    </header>

    <!-- Barra de KPIs como resumen de totales -->
    <section class="kpi-section">
        <div class="kpi-container">
            <div class="kpi-card">
                <div class="kpi-title">ðŸšš Total Viajes</div>
                <div class="kpi-value">{{ total_viajes }}</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">ðŸ’° Monto Total</div>
                <div class="kpi-value">$ {{ monto_total }}</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">ðŸ“Š Precio Promedio</div>
                <div class="kpi-value">$ {{ precio_por_viaje | default("40") }}</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">ðŸ“… PerÃ­odo</div>
                <div class="kpi-value">{{ periodo }}</div>
            </div>
        </div>
    </section>

    <section class="tabla-wrapper">
        <h2>Tabla de viajes de <span class="ingresos">ingresos</span></h2>
        <table class="tabla">
            <thead>
                <tr>
                    {% for col in columnas %}
                    <th>{{ col }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for fila in filas %}
                <tr>
                    {% for col in columnas %}
                    <td>{{ fila[col] }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="{{ columnas|length - 1 }}" class="total-label">Total</td>
                    <td class="total">$&nbsp;{{ monto_total }}</td>
                </tr>
            </tfoot>
        </table>
    </section>

    {# El paginado visual se manejarÃ¡ desde wkhtmltopdf (encabezado). Este pie ya no es necesario. #}
</body>

</html>